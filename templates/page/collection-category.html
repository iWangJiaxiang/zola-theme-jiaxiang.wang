{% import "_macros.html" as macro %}
{% import "macro/collection.html" as macro_collection %}

{% extends "page/base.html" %}

{% block head %}
    {{ macro::head_meta(title = doc.title, _permalink = doc.permalink, cover = "", excerpt = doc.description, type = 'website') }}
{% endblock %}

{% block content %}
    {% set doc = page | default(value=section) %}

    <header class="not-top-img" id="page-header">
        {{ macro::nav(title = doc.title) }}
    </header>
    
    <main class="layout hide-aside" id="content-inner">
        <div id="page">
            <div class="page-content">
                <div class="collections-grid">
                    {% for subsection in doc.subsections %}
                        {% set collection = get_section(path=subsection) %}
                        <a href="{{ collection.permalink }}" style="padding: 1rem;">
                            <div class="collection-card">
                                <div class="collection-body">
                                    <h3 class="collection-title">
                                        {{ collection.title | default(value=collection.path | split(pat="/") | last) }}
                                    </h3>
                                    {% if collection.description %}
                                        <p class="collection-description">{{ collection.description }}</p>
                                    {% endif %}
                                </div>
                                {% include "partial/widget/effect/wave.html" %}
                            </div>
                        </a>
                    {% endfor %}
                </div>
            </div>
            <style>
                .collection-card {
                    position: relative;
                    border-radius: 20px;
                    overflow: hidden;
                    backdrop-filter: blur(20px);
                    -webkit-backdrop-filter: blur(20px);
                    border: 1px solid rgba(255, 255, 255, 0.18);
                    box-shadow: 
                        0 8px 32px rgba(0, 0, 0, 0.1),
                        0 2px 16px rgba(0, 0, 0, 0.08),
                        inset 0 1px 0 rgba(255, 255, 255, 0.1);
                    transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
                    
                    /* Apple风格渐变背景 */
                    background: linear-gradient(135deg, 
                        rgba(255, 255, 255, 0.25) 0%,
                        rgba(255, 255, 255, 0.1) 25%,
                        rgba(255, 255, 255, 0.05) 50%,
                        rgba(0, 0, 0, 0.02) 75%,
                        rgba(0, 0, 0, 0.05) 100%
                    );
                }

                .collection-card::before {
                    content: '';
                    position: absolute;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background: linear-gradient(135deg,
                        rgba(74, 144, 226, 0.1) 0%,
                        rgba(80, 200, 120, 0.08) 25%,
                        rgba(255, 159, 67, 0.06) 50%,
                        rgba(245, 101, 101, 0.08) 75%,
                        rgba(155, 89, 182, 0.1) 100%
                    );
                    opacity: 0;
                    transition: opacity 0.4s ease;
                    pointer-events: none;
                }

                .collection-card:hover {
                    transform: translateY(-8px) scale(1.02);
                    box-shadow: 
                        0 20px 40px rgba(0, 0, 0, 0.15),
                        0 8px 32px rgba(0, 0, 0, 0.12),
                        inset 0 1px 0 rgba(255, 255, 255, 0.2);
                    border-color: rgba(255, 255, 255, 0.3);
                }

                .collection-card:hover::before {
                    opacity: 1;
                }

                .collection-body {
                    padding: 2rem 1.5rem;
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    text-align: center;
                    position: relative;
                    z-index: 1;
                }

                .collection-title {
                    font-size: 1.25rem;
                    font-weight: 600;
                    margin: 0 0 0.5rem 0;
                    color: var(--font-color);
                    line-height: 1.4;
                    transition: color 0.3s ease;
                }

                .collection-description {
                    font-size: 0.9rem;
                    color: var(--font-color-secondary);
                    margin: 0;
                    line-height: 1.5;
                    opacity: 0.8;
                    transition: opacity 0.3s ease;
                }

                .collection-card:hover .collection-description {
                    opacity: 1;
                }

                /* 暗色模式适配 */
                @media (prefers-color-scheme: dark) {
                    .collection-card {
                        background: linear-gradient(135deg, 
                            rgba(255, 255, 255, 0.08) 0%,
                            rgba(255, 255, 255, 0.05) 25%,
                            rgba(255, 255, 255, 0.02) 50%,
                            rgba(0, 0, 0, 0.1) 75%,
                            rgba(0, 0, 0, 0.15) 100%
                        );
                        border-color: rgba(255, 255, 255, 0.1);
                        color: white !important;
                    }
                    
                    .collection-card:hover {
                        border-color: rgba(255, 255, 255, 0.2);
                    }
                }
            </style>
        </div>
    </main>

    {% include "partial/common/footer.html" %}

   
{% endblock %}