{% import "_macros.html" as macro %}
{% import "macro/collection.html" as macro_collection %}

{% extends "page/base.html" %}

{% block head %}
    {{ macro::head_meta(title = doc.title, _permalink = doc.permalink, cover = "", excerpt = doc.description, type = 'website') }}
{% endblock %}

{% block content %}
    {% set doc = page | default(value=section) %}

    <header class="not-top-img" id="page-header">
        {{ macro::nav(title = doc.title) }}
    </header>
    
    <main class="layout hide-aside" id="content-inner">
        <div id="page">
            {{ macro_collection::collection_list_header(title = doc.title, description = doc.description) }}
            <div class="page-content">
                <div class="collections-grid">
                    {% for subsection in doc.subsections %}
                        {% set collection = get_section(path=subsection) %}
                        <a href="{{ collection.permalink }}">
                        <div class="collection-card">
                            <div class="collection-header">
                                {% if collection.extra.cover %}
                                    {{ macro::img_progressive_loading_single_size(src=collection.extra.cover, class="collection-cover") }}
                                {% else %}
                                    <div class="collection-cover-placeholder">
                                        <i class="fas fa-book"></i>
                                    </div>
                                {% endif %}
                            </div>
                            <div class="collection-body">
                                <h3 class="collection-title">
                                    {{ collection.title | default(value=collection.path | split(pat="/") | last) }}
                                </h3>
                                {% if collection.description %}
                                    <p class="collection-description">{{ collection.description }}</p>
                                {% endif %}
                                <div class="collection-meta">
                                    <span class="collection-count">
                                        <i class="icon icon-book"></i>
                                        {{ collection.pages | length }}
                                    </span>
                                </div>
                                <div class="collection-tags">
                                    {% if collection.extra.tags %}
                                        {% for tag in collection.extra.tags %}
                                            <span class="tag">{{ tag }}</span>
                                        {% endfor %}
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        </a>
                    {% endfor %}
                </div>
            </div>
            <style>
    </style>
        </div>
    </main>

    {% include "partial/common/footer.html" %}

   
{% endblock %}